# ワークスペース分析結果

## プロジェクト概要
「８番通路」- 「８番出口」にインスパイアされた日本語ホラー/パズルゲーム
- ブラウザベースの単一ページアプリケーション
- プレイヤーは通路を進みながら異変を検出し、0番通路から8番通路への脱出を目指す

## ファイル構成
```
/
├── index.html          # メインゲームファイル（HTML/CSS/JS統合）
├── AGENTS.md          # 一般的な開発ガイドライン
├── CLAUDE.md          # Claude Code向け詳細ガイド
├── GEMINI.md          # Gemini向け開発ガイド
└── .kiro/
    └── workspace-analysis.md  # この分析ファイル
```

## 技術仕様

### アーキテクチャ
- **単一ファイル構成**: 全てのコードがindex.htmlに統合
- **ゲーム状態管理**: JavaScript変数による状態管理
- **異変システム**: 100種類以上の異変パターン
- **ランダム性**: crypto.getRandomValues()使用

### ゲームモード
- **通常モード**: デフォルト（ミス時フィードバックあり）
- **ハードモード** (`?hard`): ミス時フィードバックなし
- **ソフトモード** (`?soft`): 正解後も前回異変表示
- **デバッグモード** (`?debug`): 開発者ツール表示
- **シミュレーションモード** (`?sim=N`): 乱数分析

### 異変分類
1. **テキスト異変** (`class: ''`)
   - 誤字、句読点変更、漢字違い、文章構成変更
   - 例: 「天井」→「天丼」、句点→「！」

2. **CSS異変** (`class: 'anomaly-*'`)
   - 照明色変更、要素位置変更、アニメーション
   - 例: 赤い照明、傾いた非常口、床の色変更

3. **JavaScript異変**
   - 動的な挙動変更
   - 例: カーソル回避ボタン、画面暗転、カーソル軌跡

### 主要な技術的特徴
- **70%異変発生率**: ゲームバランス調整済み
- **トランジション抑制**: 異変適用時の視覚的変化を隠蔽
- **スマートフォン対応**: レスポンシブデザイン
- **デバッグ機能**: 異変選択、統計表示

## 開発環境

### ローカルサーバー
```bash
# Python
python3 -m http.server 8000

# Node.js
npx serve .
```

### コード品質
```bash
# フォーマットチェック
npx prettier --check .

# HTML検証
npx html-validate index.html
```

### テストURL
- 通常: `index.html`
- ハード: `index.html?hard`
- ソフト: `index.html?soft`
- デバッグ: `index.html?debug`

## コーディング規約
- **インデント**: JavaScript 4スペース、HTML/CSS 2スペース
- **命名**: JavaScript camelCase、CSS anomaly-*
- **言語**: UI日本語、コメント日本語/英語併用
- **単一ファイル維持**: 分割禁止

## 重要な制約
- **ゲームバランス**: 70%異変率変更禁止
- **通路数**: 8通路固定
- **トランジション抑制**: 異変検出防止のため必須
- **日本語保持**: UI言語変更禁止
- **単一ファイル**: 分割禁止

## 異変追加手順
1. `anomalies`配列に追加
2. CSS異変の場合、対応スタイル追加
3. JS異変の場合、`applyAnomaly()`と`resetVisuals()`に処理追加

## 分析日時
2025年10月21日 - 完全なワークスペース分析完了